cmake_minimum_required(VERSION 3.13)

set(PICO_BOARD pico_w)

set(PICO_SDK_PATH   ${CMAKE_CURRENT_LIST_DIR}/pico-sdk)
set(PICO_EXTRAS_PATH ${CMAKE_CURRENT_LIST_DIR}/pico-extras)

include(${PICO_SDK_PATH}/external/pico_sdk_import.cmake)
include(${PICO_EXTRAS_PATH}/external/pico_extras_import.cmake)

project(pico_http_server C CXX ASM)
pico_sdk_init()


add_executable(server
    main.c
    src/request.c
    src/response.c
)

# route all stdio printf()s over USB CDC instead of UART0
# (and turn off UART stdio so it doesnâ€™t conflict)
pico_enable_stdio_usb(server 1)
pico_enable_stdio_uart(server 0)

target_include_directories(server PRIVATE
    ${CMAKE_CURRENT_LIST_DIR}    # for main.c
    ${CMAKE_CURRENT_LIST_DIR}/inc
    ${CMAKE_CURRENT_LIST_DIR}/src
)

target_link_libraries(server PRIVATE
pico_stdlib
pico_cyw43_arch_lwip_poll
)

pico_add_extra_outputs(server)
